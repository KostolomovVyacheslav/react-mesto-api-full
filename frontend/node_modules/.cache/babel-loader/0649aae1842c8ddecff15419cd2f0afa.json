{"ast":null,"code":"import _classCallCheck from\"D:/dev/react-mesto-api-full/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/dev/react-mesto-api-full/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";var Authorization=/*#__PURE__*/function(){function Authorization(_ref){var url=_ref.url,token=_ref.token;_classCallCheck(this,Authorization);this.url=url;this.token=token;}_createClass(Authorization,[{key:\"_getResponse\",value:function _getResponse(res){if(!res.ok){return Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0438 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445: \".concat(res.status));};return res.json();}},{key:\"register\",value:function register(data){var _this=this;return fetch(\"\".concat(this.url,\"/signup\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({\"password\":data.password,\"email\":data.email})}).then(function(res){return _this._getResponse(res);});}},{key:\"authorize\",value:function authorize(data){var _this2=this;return fetch(\"\".concat(this.url,\"/signin\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({\"password\":data.password,\"email\":data.email})}).then(function(res){return _this2._getResponse(res);});}},{key:\"getContent\",value:function getContent(token){var _this3=this;return fetch(\"\".concat(this.url,\"/users/me\"),{method:'GET',headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \".concat(token)}}).then(function(res){return _this3._getResponse(res);});}}]);return Authorization;}();export default new Authorization({url:'https://auth.nomoreparties.co'});","map":{"version":3,"names":["Authorization","url","token","res","ok","Promise","reject","status","json","data","fetch","method","headers","body","JSON","stringify","password","email","then","_getResponse"],"sources":["D:/dev/react-mesto-api-full/frontend/src/utils/authorization.js"],"sourcesContent":["class Authorization {\r\n   constructor({url, token}) {\r\n      this.url = url;\r\n      this.token = token;\r\n   }\r\n   \r\n   _getResponse(res) {\r\n      if(!res.ok) {\r\n        return Promise.reject(`Ошибка загрузки данных: ${res.status}`);\r\n      };\r\n      return res.json();\r\n      }\r\n\r\n   register(data) {\r\n      return fetch(`${this.url}/signup`, {\r\n         method: 'POST',\r\n         headers: {\r\n            'Content-Type': 'application/json'\r\n         },\r\n         body: JSON.stringify({\r\n            \"password\": data.password,\r\n            \"email\": data.email\r\n         })\r\n      })\r\n      .then(res => this._getResponse(res));\r\n   }\r\n\r\n   authorize(data) {\r\n   return fetch(`${this.url}/signin`, {\r\n      method: 'POST',\r\n      headers: {\r\n         'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n         \"password\": data.password,\r\n         \"email\": data.email\r\n      })\r\n      })\r\n      .then(res => this._getResponse(res));\r\n   }\r\n\r\n   getContent(token) {\r\n      return fetch(`${this.url}/users/me`, {\r\n         method: 'GET',\r\n         headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            \"Authorization\" : `Bearer ${token}`\r\n         }\r\n         })\r\n         .then(res => this._getResponse(res));\r\n   }\r\n}\r\n\r\nexport default new Authorization({\r\n   url: 'https://auth.nomoreparties.co'\r\n});"],"mappings":"qPAAMA,c,yBACH,4BAA0B,IAAbC,IAAa,MAAbA,GAAa,CAARC,KAAQ,MAARA,KAAQ,qCACvB,KAAKD,GAAL,CAAWA,GAAX,CACA,KAAKC,KAAL,CAAaA,KAAb,CACF,C,sDAED,sBAAaC,GAAb,CAAkB,CACf,GAAG,CAACA,GAAG,CAACC,EAAR,CAAY,CACV,MAAOC,QAAO,CAACC,MAAR,uIAA0CH,GAAG,CAACI,MAA9C,EAAP,CACD,EACD,MAAOJ,IAAG,CAACK,IAAJ,EAAP,CACC,C,wBAEJ,kBAASC,IAAT,CAAe,gBACZ,MAAOC,MAAK,WAAI,KAAKT,GAAT,YAAuB,CAChCU,MAAM,CAAE,MADwB,CAEhCC,OAAO,CAAE,CACN,eAAgB,kBADV,CAFuB,CAKhCC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAClB,WAAYN,IAAI,CAACO,QADC,CAElB,QAASP,IAAI,CAACQ,KAFI,CAAf,CAL0B,CAAvB,CAAL,CAUNC,IAVM,CAUD,SAAAf,GAAG,QAAI,MAAI,CAACgB,YAAL,CAAkBhB,GAAlB,CAAJ,EAVF,CAAP,CAWF,C,yBAED,mBAAUM,IAAV,CAAgB,iBAChB,MAAOC,MAAK,WAAI,KAAKT,GAAT,YAAuB,CAChCU,MAAM,CAAE,MADwB,CAEhCC,OAAO,CAAE,CACN,eAAgB,kBADV,CAFuB,CAKhCC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAClB,WAAYN,IAAI,CAACO,QADC,CAElB,QAASP,IAAI,CAACQ,KAFI,CAAf,CAL0B,CAAvB,CAAL,CAUHC,IAVG,CAUE,SAAAf,GAAG,QAAI,OAAI,CAACgB,YAAL,CAAkBhB,GAAlB,CAAJ,EAVL,CAAP,CAWC,C,0BAED,oBAAWD,KAAX,CAAkB,iBACf,MAAOQ,MAAK,WAAI,KAAKT,GAAT,cAAyB,CAClCU,MAAM,CAAE,KAD0B,CAElCC,OAAO,CAAE,CACN,eAAgB,kBADV,CAEN,iCAA4BV,KAA5B,CAFM,CAFyB,CAAzB,CAAL,CAOHgB,IAPG,CAOE,SAAAf,GAAG,QAAI,OAAI,CAACgB,YAAL,CAAkBhB,GAAlB,CAAJ,EAPL,CAAP,CAQF,C,6BAGJ,cAAe,IAAIH,cAAJ,CAAkB,CAC9BC,GAAG,CAAE,+BADyB,CAAlB,CAAf"},"metadata":{},"sourceType":"module"}