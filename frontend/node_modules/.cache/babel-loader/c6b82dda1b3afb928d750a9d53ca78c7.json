{"ast":null,"code":"import _classCallCheck from\"D:/dev/react-mesto-api-full/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/dev/react-mesto-api-full/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";var Api=/*#__PURE__*/function(){function Api(_ref){var url=_ref.url,headers=_ref.headers;_classCallCheck(this,Api);this._url=url;this._headers=headers;}_createClass(Api,[{key:\"_checkResponse\",value:function _checkResponse(res){if(res.ok){return res.json();}else{Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0438 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445 \".concat(res.status));}}},{key:\"getUserData\",value:function getUserData(){return fetch(\"\".concat(this._url,\"/users/me\"),{method:'GET',headers:{Authorization:\"\".concat(this._headers)}}).then(this._checkResponse);}},{key:\"getInitialCards\",value:function getInitialCards(){return fetch(\"\".concat(this._url,\"/cards\"),{method:'GET',headers:{Authorization:\"\".concat(this._headers)}}).then(this._checkResponse);}},{key:\"addNewCard\",value:function addNewCard(item){return fetch(\"\".concat(this._url,\"/cards\"),{method:'POST',headers:{Authorization:\"\".concat(this._headers),'Content-Type':'application/json'},body:JSON.stringify({name:item.name,link:item.link})}).then(this._checkResponse);}},{key:\"getUserId\",value:function getUserId(){return fetch(\"https://mesto.nomoreparties.co/v1/cohort-46/users/me\",{method:'GET',headers:{Authorization:'ddb2474c-5895-4c61-a372-bb2b9d4e6bd7'}}).then(this._checkResponse).then(function(result){return result._id;});}},{key:\"editProfile\",value:function editProfile(userData){return fetch(\"\".concat(this._url,\"/users/me\"),{method:'PATCH',headers:{Authorization:\"\".concat(this._headers),'Content-Type':'application/json'},body:JSON.stringify({name:userData.name,about:userData.about})}).then(this._checkResponse);}},{key:\"changeProfileAvatar\",value:function changeProfileAvatar(avatarData){return fetch(\"\".concat(this._url,\"/users/me/avatar\"),{method:'PATCH',headers:{Authorization:\"\".concat(this._headers),'Content-Type':'application/json'},body:JSON.stringify({avatar:avatarData.avatarLink})}).then(this._checkResponse);}},{key:\"deleteCard\",value:function deleteCard(id){return fetch(\"\".concat(this._url,\"/cards/\").concat(id),{method:'DELETE',headers:{Authorization:\"\".concat(this._headers),'Content-Type':'application/json'}}).then(this._checkResponse);}},{key:\"changeLikeStatus\",value:function changeLikeStatus(id,isLiked){if(isLiked){return fetch(\"\".concat(this._url,\"/cards/\").concat(id,\"/likes\"),{method:'DELETE',headers:{Authorization:\"\".concat(this._headers),'Content-Type':'application/json'}}).then(this._checkResponse);}else{return fetch(\"\".concat(this._url,\"/cards/\").concat(id,\"/likes\"),{method:'PUT',headers:{Authorization:\"\".concat(this._headers),'Content-Type':'application/json'}}).then(this._checkResponse);}}}]);return Api;}();export default new Api({url:'https://mesto.nomoreparties.co/v1/cohort-46',headers:'ddb2474c-5895-4c61-a372-bb2b9d4e6bd7'});","map":{"version":3,"names":["Api","url","headers","_url","_headers","res","ok","json","Promise","reject","status","fetch","method","Authorization","then","_checkResponse","item","body","JSON","stringify","name","link","result","_id","userData","about","avatarData","avatar","avatarLink","id","isLiked"],"sources":["D:/dev/react-mesto-api-full/frontend/src/utils/api.js"],"sourcesContent":["class Api {\r\n   constructor({url, headers}) {\r\n      this._url = url;\r\n      this._headers = headers;\r\n   }\r\n\r\n   _checkResponse(res) {\r\n      if (res.ok) {\r\n         return res.json();\r\n      } else {\r\n         Promise.reject(`Ошибка загрузки данных ${res.status}`);\r\n      }\r\n   }\r\n\r\n   getUserData() {\r\n      return fetch(`${this._url}/users/me`, {\r\n         method: 'GET',\r\n         headers: {\r\n            Authorization: `${this._headers}`\r\n         }\r\n      })\r\n      .then(this._checkResponse)\r\n   }\r\n\r\n   getInitialCards() {\r\n      return fetch(`${this._url}/cards`, {\r\n         method: 'GET',\r\n         headers: {\r\n            Authorization: `${this._headers}`\r\n         }\r\n      })\r\n      .then(this._checkResponse)\r\n   }\r\n\r\n   addNewCard(item) {\r\n      return fetch(`${this._url}/cards`, {\r\n         method: 'POST',\r\n         headers: {\r\n            Authorization: `${this._headers}`,\r\n            'Content-Type': 'application/json'\r\n         },\r\n         body: JSON.stringify({\r\n            name: item.name,\r\n            link: item.link\r\n         })\r\n      })\r\n      .then(this._checkResponse)\r\n   }\r\n\r\n   getUserId() {\r\n      return fetch(`https://mesto.nomoreparties.co/v1/cohort-46/users/me`, {\r\n         method: 'GET',\r\n         headers: {\r\n            Authorization: 'ddb2474c-5895-4c61-a372-bb2b9d4e6bd7'\r\n         }\r\n      })\r\n      .then(this._checkResponse)\r\n      .then(result => {\r\n         return result._id;\r\n      })\r\n   }\r\n\r\n   editProfile(userData) {\r\n      return fetch(`${this._url}/users/me`, {\r\n         method: 'PATCH',\r\n         headers: {\r\n            Authorization: `${this._headers}`,\r\n            'Content-Type': 'application/json'\r\n         },\r\n         body: JSON.stringify({\r\n            name: userData.name,\r\n            about: userData.about\r\n          })\r\n      })\r\n      .then(this._checkResponse)\r\n   }\r\n\r\n   changeProfileAvatar(avatarData) {\r\n      return fetch(`${this._url}/users/me/avatar`, {\r\n         method: 'PATCH',\r\n         headers: {\r\n            Authorization: `${this._headers}`,\r\n            'Content-Type': 'application/json'\r\n         },\r\n         body: JSON.stringify({\r\n            avatar: avatarData.avatarLink\r\n         })\r\n      })\r\n      .then(this._checkResponse)\r\n   }\r\n\r\n   deleteCard(id) {\r\n      return fetch(`${this._url}/cards/${id}`, {\r\n         method: 'DELETE',\r\n         headers: {\r\n            Authorization: `${this._headers}`,\r\n            'Content-Type': 'application/json'\r\n         }\r\n      })\r\n      .then(this._checkResponse)\r\n   }\r\n\r\n   changeLikeStatus(id, isLiked) {\r\n      if (isLiked) {\r\n         return fetch(`${this._url}/cards/${id}/likes`, {\r\n            method: 'DELETE',\r\n            headers: {\r\n               Authorization: `${this._headers}`,\r\n               'Content-Type': 'application/json'\r\n            }\r\n         })\r\n         .then(this._checkResponse)\r\n      } else {\r\n         return fetch(`${this._url}/cards/${id}/likes`, {\r\n            method: 'PUT',\r\n            headers: {\r\n               Authorization: `${this._headers}`,\r\n               'Content-Type': 'application/json'\r\n            }\r\n         })\r\n         .then(this._checkResponse)\r\n      }\r\n   }\r\n}\r\n\r\nexport default new Api({\r\n   url: 'https://mesto.nomoreparties.co/v1/cohort-46',\r\n   headers: 'ddb2474c-5895-4c61-a372-bb2b9d4e6bd7'\r\n})"],"mappings":"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"},"metadata":{},"sourceType":"module"}